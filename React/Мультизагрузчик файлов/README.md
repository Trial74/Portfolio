# Мультизагрузчик файлов (DnDFilesImageMultiple)

React-компонент для загрузки **нескольких изображений** с поддержкой **Drag and Drop** и выбора через диалог. Ограничения по размеру файлов и их количеству задаются через пропсы.

## Возможности

- Загрузка **нескольких файлов** одновременно перетаскиванием (DnD) или кнопкой «Выбрать»
- Ограничение **максимального размера файла** (в байтах) через проп `maxSize`
- Ограничение **максимального количества файлов** через проп `countFiles`
- Проверка типа: только **JPEG**, **PNG** и **WebP**
- **Два режима отображения**: сетка (grid) и карусель (carousel)
- Адаптивная сетка с автоматическим распределением изображений (1-10 файлов)
- Удаление отдельных изображений или очистка всех сразу
- Визуальные состояния блока: ожидание, перетаскивание, успех, ошибка, отключён
- Режим разработки с добавлением тестовых изображений
- Поддержка тёмной темы

## Визуальные примеры

![Состояние загрузки файлов](dnd_mylti_files_0.JPG)

![Предпросмотр загруженных изображений Сетка](dnd_mylti_files_1.JPG)

![Предпросмотр загруженных изображений Карусель](dnd_mylti_files_2.JPG)

## Пропсы

| Проп | Тип | По умолчанию | Описание |
|------|-----|--------------|----------|
| `name` | `string` | `''` | **Обязательный.** Уникальное имя поля (нужно при нескольких экземплярах компонента). |
| `maxSize` | `number` | `30000000` (30 МБ) | Максимальный размер одного файла в байтах. |
| `countFiles` | `number` | `10` | Максимальное количество файлов для загрузки. |
| `width` | `number` | — | Ширина блока дропа (опционально). |
| `height` | `number` | — | Высота блока дропа (опционально). |
| `icon` | `ReactNode` | иконка загрузки | Иконка в пустом блоке дропа. |
| `label` | `string` | — | Подпись под кнопкой выбора файла (опционально). |
| `classes` | `string` | `false` | CSS-классы контейнера блока дропа (опционально). |
| `action` | `any` | — | Идентификатор действия для callback при отправке данных (опционально). |
| `files` | `File[]` | — | Массив объектов `File` для программной загрузки в компонент. |
| `handleDnDFiles` | `(action, data) => void` | — | Обработчик в родителе: вызывается при отправке или очистке данных (опционально). |
| `disable` | `boolean` | `false` | Отключает взаимодействие с компонентом (только просмотр). |
| `develop` | `boolean` | `false` | Режим разработки: добавляет кнопку для загрузки тестовых изображений. |

## Ref

Компонент обёрнут в `forwardRef`. Через ref доступен метод:

- **`uploadFormData()`** — возвращает массив загруженных изображений с данными о файлах.

## Режимы отображения

### Сетка (Grid)
- Адаптивное распределение изображений в зависимости от количества (1-10 файлов)
- Автоматическое изменение размеров ячеек для оптимального отображения

### Карусель (Carousel)
- Отображение по 3 изображения на слайд
- Навигация стрелками влево/вправо
- Индикаторы слайдов внизу
- Показ названия и размера файла под каждым изображением

## Пример использования

```jsx
import DnDFilesImageMultiple from './DnDFilesImageMultiple';

function MyForm() {
    const uploadRef = useRef();

    const handleDnDFiles = (action, data) => {
        // Обработка данных загрузки
        console.log(action, data);
    };

    return (
        <DnDFilesImageMultiple
            name="gallery"
            maxSize={10 * 1024 * 1024}
            countFiles={5}
            width={600}
            height={500}
            label="До 5 файлов, до 10 МБ каждый"
            action="gallery"
            handleDnDFiles={handleDnDFiles}
            ref={uploadRef}
        />
    );
}

// Получение данных через ref
const images = uploadRef.current?.uploadFormData();
```

## Ограничения по размеру и количеству

- **`maxSize`** задаётся в **байтах** (например, `10 * 1024 * 1024` для 10 МБ).
- При превышении размера файл не добавляется в список.
- **`countFiles`** ограничивает максимальное количество загружаемых файлов (по умолчанию 10).
- При достижении лимита кнопка добавления становится неактивной.

## Поддерживаемые форматы

- `image/jpeg`, `image/pjpeg`, `image/png`, `image/webp`  
В интерфейсе: `.jpg`, `.jpeg`, `.png`, `.webp`.

## Структура данных изображения

Каждое изображение в массиве содержит:

```javascript
{
    index: number,           // Уникальный индекс изображения
    objRes: {
        fileObj: File,       // Объект файла
        size: number,        // Размер в байтах
        contentType: string  // MIME-тип
    },
    preview: string,         // URL для предпросмотра (URL.createObjectURL)
    name: string,            // Имя файла
    size: string             // Размер в МБ (строка с 2 знаками после запятой)
}
```

## Зависимости

- Иконки: `@/Administrator/Components/Icons/Icons` (`upload`, `carousel`, `grid`, `menuOpen`, `check`, `close`)
